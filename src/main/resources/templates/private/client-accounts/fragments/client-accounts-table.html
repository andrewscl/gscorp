<div th:fragment="content" class="client-accounts-table">
  <div class="client-accounts-header">
    <h2>
      <!-- Icono cuentas -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="vertical-align:-6px;margin-right:.5rem">
        <circle cx="12" cy="12" r="10" fill="#e6f6ff"/>
        <path d="M12 7a3 3 0 100 6 3 3 0 000-6zM5 19a7 7 0 0114 0" stroke="#0ea5e9" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Cuentas de cliente
    </h2>

    <!-- Navega a la página de creación -->
    <a class="btn-primary" id="createClientAccountBtn" th:href="@{/private/client-accounts/create}">
      <svg width="18" height="18" fill="none" stroke="#fff" stroke-width="2" style="vertical-align:middle;margin-right:.35rem">
        <circle cx="9" cy="9" r="8" fill="#06b6d4" stroke="none"/>
        <path d="M9 5v8M5 9h8" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Crear Cuenta
    </a>
  </div>

  <div class="client-accounts-table-container">
    <table class="client-accounts-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Cliente</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="acct : ${accounts}">
          <td th:text="${acct.id}">1</td>
          <td th:text="${acct.name}">Nombre cuenta</td>
          <!-- Usar clientName si pasas DTO; fallback seguro si pasas entidad -->
          <td th:text="${acct.clientName != null ? acct.clientName : (acct.client != null ? acct.client.name : '—')}">Cliente</td>
          <td class="actions">
            <a class="btn-link" th:href="@{/private/client-accounts/show/{id}(id=${acct.id})}">Ver</a>
            <a class="btn-link" th:href="@{/private/client-accounts/edit/{id}(id=${acct.id})}">Editar</a>

            <!-- Eliminación con formulario para incluir token CSRF y método DELETE -->
            <form th:action="@{/private/client-accounts/delete/{id}(id=${acct.id})}"
                  method="post"
                  th:onsubmit="return confirm('¿Eliminar cuenta de cliente? Esta acción no se puede revertir.');"
                  style="display:inline">
              <input type="hidden" name="_method" value="delete"/>
              <button type="submit" class="btn-link btn-danger">Eliminar</button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>