<div th:fragment="content">

  <div class="patrols-header">

    <!-- fila de título: icono + texto a la izquierda, badge de cantidad a la derecha -->
    <div class="title-row" role="heading" aria-level="2">
      <div class="title-left" aria-hidden="true">
        <!-- Icono tabla -->
        <svg class="icon icon-table" width="24" height="24" viewBox="0 0 24 24" focusable="false">
          <rect x="2" y="4" width="20" height="16" rx="2" fill="#eef2ff" stroke="#2563eb" stroke-width="1"/>
          <path d="M6 12h12M6 8h12M6 16h8" stroke="#2563eb" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <span class="title-text">Patrols</span>
      </div>

      <!-- badge con cantidad de registros (alineado a la derecha) -->
      <span class="patrols-count" th:if="${patrolsCount != null}"
            th:text="${patrolsCount + ' registro' + (patrolsCount == 1 ? '' : 's')}"
            aria-live="polite" aria-atomic="true"></span>
    </div>

    <!-- línea descriptiva / resumen: debajo del título -->
    <div class="header-meta"
        th:replace="private/patrols/fragments/patrols-header-meta :: content">
    </div>

    <!-- toolbar / filtros (igual que antes) -->
    <div class="filters-actions-row" role="toolbar" aria-label="Filtros de supervisión">

      <label class="filter-item">
        <span class="site-label">Sitio</span>
        <input id="filter-site" class="filter-input" type="text"/>
      </label>

      <button id="applyFiltersBtn" type="button" class="btn btn-secondary"
              data-ajax-url="/private/patrols/table-search"
              aria-label="Aplicar filtros">
        Aplicar
      </button>

      <div class="actions-row">
        <button id="createPatrolBtn" class="btn btn-primary"
                th:if="${#authorization.expression('hasRole(''SUPERVISOR'')')}"
                th:attr="data-path=@{/private/patrols/create}" aria-label="Registrar visita">
          <!-- icono + -->
          <svg class="icon icon-plus" width="16" height="16" viewBox="0 0 16 16" focusable="false">
            <circle cx="8" cy="8" r="7" fill="#dbeafe" stroke="#1e3a8a" stroke-width="1"/>
            <path d="M8 5v6M5 8h6" stroke="#1e3a8a" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Crear Ronda de Supervisión
        </button>
      </div>

    </div>

  </div>

  <div class="patrol-table-container">
    <table class="patrol-table" role="table" aria-label="Tabla de rondas de supervisión">
      <caption class="visually-hidden">Listado de rondas de supervisión</caption>
      <thead>
        <tr>
          <th scope="col">Id</th>
          <th scope="col">Nombre</th>
          <th scope="col">Instalación</th>
          <th scope="col">Cobertura semanal</th>
          <th scope="col">Hora de inicio</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>

      <tbody th:replace="private/patrols/fragments/patrol-table-rows :: rows"></tbody>

    </table>
  </div>

</div>