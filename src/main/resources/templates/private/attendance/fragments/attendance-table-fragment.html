<div th:fragment="attendanceTable">

  <div class="attendance-header">
    <h2>Asistencia</h2>

    <!-- Filtro SOLO por fechas -->
    <form id="att-filter" class="att-filter" data-path="/private/attendance">
      <label>
        Desde
        <input type="date" name="from" th:value="${from}" required>
      </label>
      <label>
        Hasta
        <input type="date" name="to" th:value="${to}" required>
      </label>
      <button type="submit" class="btn-primary">Filtrar</button>

      <!-- atajos rápidos (opcional) -->
      <div class="quick-range">
        <button type="button" data-range="today"  class="btn-link">Hoy</button>
        <button type="button" data-range="week"   class="btn-link">Esta semana</button>
        <button type="button" data-range="month"  class="btn-link">Este mes</button>
      </div>
    </form>
  </div>

  <div class="attendance-table-container">
    <table class="attendance-table">
      <thead>
        <tr>
          <th>Fecha/Hora</th>
          <th>Acción</th>
          <th>Ubicación OK</th>
          <th>Distancia (m)</th>
          <th>Precisión (m)</th>
          <th>IP</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="p : ${items}">
          <td th:text="${#temporals.format(p.ts, 'yyyy-MM-dd HH:mm')}">2025-10-07 09:00</td>
          <td th:text="${p.action}">IN</td>
          <td th:text="${p.locationOk ? 'Sí' : 'No'}">Sí</td>
          <td th:text="${p.distanceM}">12.3</td>
          <td th:text="${p.accuracyM}">8.0</td>
          <td th:text="${p.ip}">10.0.0.1</td>
        </tr>
        <tr th:if="${#lists.isEmpty(items)}">
          <td colspan="6" style="text-align:center;color:#6b7280">Sin registros en el rango seleccionado.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script type="module" src="/js/private/attendance/attendance-table.js"></script>
</div>
