<div th:fragment="content" class="shift-requests-table-fragment">
  <div class="shift-requests-header">
    <h2>
      <!-- Icono turnos -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
           style="vertical-align:-6px;margin-right:.5rem">
        <circle cx="12" cy="12" r="10" fill="#eef2ff"/>
        <path d="M8 7h8M8 12h8M8 17h5" stroke="#2563eb" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Requerimientos de turno
    </h2>

    <!-- Navegación SPA vía data-path -->
    <button type="button" class="btn-primary" data-path="/private/shift-requests/create" id="createShiftRequestBtn">
      <svg width="18" height="18" fill="none" stroke="#fff" stroke-width="2" style="vertical-align:middle;margin-right:.35rem">
        <circle cx="9" cy="9" r="8" fill="#2563eb" stroke="none"/>
        <path d="M9 5v8M5 9h8" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Crear Requerimiento
    </button>
  </div>

  <div class="shift-requests-table-container">
    <table class="shift-requests-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Código</th>
          <th>Sitio</th>
          <th>Tipo</th>
          <th>Fecha inicio</th>
          <th>Fecha fin</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="r : ${shiftRequests}" th:data-id="${r.id}">
          <td th:text="${r.id}">1</td>
          <td th:text="${r.code}">TR001</td>
          <td th:text="${r.site != null ? r.site.name : '—'}">Nombre sitio</td>
          <td th:text="${r.type}">TIPO</td>
          <td th:text="${r.startDate != null ? #temporals.format(r.startDate, 'yyyy-MM-dd') : '—'}">2025-01-01</td>
          <td th:text="${r.endDate != null ? #temporals.format(r.endDate, 'yyyy-MM-dd') : '—'}">2025-12-31</td>

          <td class="actions">
            <button type="button" class="btn-link"
                    th:attr="data-path=@{/private/shift-requests/show/{id}(id=${r.id})}">
              Ver
            </button>

            <button type="button" class="btn-link"
                    th:attr="data-path=@{/private/shift-requests/edit/{id}(id=${r.id})}"
                    th:if="${#authorization.expression('hasRole(''ADMINISTRATOR'')')}">
              Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>