const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["private/sites/view-site.js","auth.js"])))=>i.map(i=>d[i]);
import{f as g}from"./auth.js";const h="modulepreload",b=function(e){return"/"+e},m={},v=function(o,t,i){let s=Promise.resolve();if(t&&t.length>0){let a=function(r){return Promise.all(r.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");s=a(t.map(r=>{if(r=b(r),r in m)return;m[r]=!0;const f=r.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${d}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":h,f||(l.as="script"),l.crossOrigin="",l.href=r,c&&l.setAttribute("nonce",c),document.head.appendChild(l),f)return new Promise((y,p)=>{l.addEventListener("load",y),l.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${r}`)))})}))}function n(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return s.then(u=>{for(const c of u||[])c.status==="rejected"&&n(c.reason);return o().catch(n)})},w=(e,o,t)=>{const i=e[o];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((s,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+o+(o.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};async function S(e,o=!1){const t=E(e),i=document.body.getAttribute("data-layout");if(e==="/public/home"){console.warn("[navigateTo] Redirigiendo a index-view para /public/home"),window.location.href="/public/home";return}function n(a){return a==="auth"?!!document.querySelector('link[href*="define-password.css"]'):a==="private"?!!document.querySelector('link[href*="private-dashboard.css"]'):a==="public"?!!document.querySelector('link[href*="index.css"]'):!0}const u=!n(t);if(!o&&(t!==i||u)){console.warn(`[navigateTo] Cambio de layout: 
                        ${i} -> ${t}`),sessionStorage.setItem("postLoginTarget",e),window.location.href=`/shell/${t}`;return}try{const a=await L(e,t);if(!a)throw new Error("No content");const r=document.getElementById("content");if(!r)throw new Error("No se encontró el contenedor #content");document.dispatchEvent(new CustomEvent("fragment:will-unload",{detail:{path:e}})),r.innerHTML=a,await _(r,e),await k(e,r),window.history.pushState({},"",e),console.log(`[navigateTo] Ruta cargada dinámicamente: ${e}`),document.dispatchEvent(new CustomEvent("route:loaded",{detail:{path:e}}))}catch(a){console.error(`[navigateTo] Error: ${a.message}`),alert("Error al navegar a la ruta solicitada.")}}function E(e){return e==="/auth"||e.startsWith("/auth/")?"auth":e==="/private"||e.startsWith("/private/")||e==="/admin"||e.startsWith("/admin/")?"private":"public"}async function L(e,o){const t=localStorage.getItem("jwt"),i=e.includes("?")?"&":"?",s=`${e}${i}fragment=1`;return o==="private"&&t?g(s).then(n=>n.ok?n.text():null):fetch(s).then(n=>n.ok?n.text():null)}async function _(e,o){const t=e.querySelectorAll('script[type="module"]');for(const i of t)if(i.src){const s=new URL(i.src,location.origin);s.searchParams.set("v",Date.now());const n=await import(s.href);typeof n.init=="function"&&n.init({container:e,path:o})}else{const s=URL.createObjectURL(new Blob([i.textContent],{type:"text/javascript"})),n=await import(s);URL.revokeObjectURL(s),typeof n.init=="function"&&n.init({container:e,path:o})}}async function k(e,o){if(e==="/public/contact"){const{setupContact:t}=await w(Object.assign({"./contact.js":()=>v(()=>import("./contact.js"),[])}),`./contact.js?v=${Date.now()}`,2);typeof t=="function"&&await t({container:o,path:e})}if(e.startsWith("/private/sites/view-site")){const{init:t}=await w(Object.assign({"./private/sites/view-site.js":()=>v(()=>import("./private/sites/view-site.js"),__vite__mapDeps([0,1]))}),`./private/sites/view-site.js?v=${Date.now()}`,4);typeof t=="function"&&t({container:o,path:e})}}export{S as n};
