console.log("signin.js cargado correctamente");function r(){const o=document.getElementById("username");o&&o.focus();const n=document.getElementById("password"),t=document.getElementById("togglePassword");t&&n&&t.addEventListener("click",function(){const e=n.getAttribute("type")==="password"?"text":"password";n.setAttribute("type",e),this.textContent=e==="password"?"Mostrar":"Ocultar"});const s=document.getElementById("loginBtn");s&&s.addEventListener("click",e=>{e.preventDefault(),i()})}r();async function i(){const o=document.getElementById("username").value,n=document.getElementById("password").value;try{const t=await fetch("/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:n})});if(!t.ok){const a=await t.text();throw new Error(a||"Credenciales invalidas")}const e=(await t.json()).token;localStorage.setItem("jwt",e),sessionStorage.setItem("postLoginTarget","/private"),window.location.replace="/shell/private"}catch(t){alert("Error al iniciar sesi√≥n: "+t.message)}}
