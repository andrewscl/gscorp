import{n as i}from"./router.js";import"./auth.js";console.log("signup.js cargado correctamente");function u(){const r=document.getElementById("username");r&&r.focus();const n=document.getElementById("password"),s=document.getElementById("togglePassword");s&&n&&s.addEventListener("click",()=>{const t=n.type==="password"?"text":"password";n.type=t,s.textContent=t==="password"?"Mostrar":"Ocultar"});const a=document.getElementById("signupForm");a&&a.addEventListener("submit",async t=>{t.preventDefault();const c=document.getElementById("username").value,d=document.getElementById("password").value;try{console.log("fetch a /auth/signup");const e=await fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:d})});if(!e.ok){const o=await e.text();throw new Error(o||"Registro fallido")}await i("/public/home")}catch(e){const o=document.getElementById("signupError");o?o.textContent="Error al registrar: "+e.message:alert("Error: "+e.message)}})}u();
