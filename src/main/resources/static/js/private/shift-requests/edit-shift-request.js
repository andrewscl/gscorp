import{f as y}from"../../auth.js";import{n as d}from"../../navigation-handler.js";const t=i=>document.querySelector(i);async function S(i){i.preventDefault();const n=t("#editShiftRequestForm")?.getAttribute("data-id")||t("#shiftRequestId")?.value,r=t("#shiftRequestCode")?.value?.trim(),f=t("#shiftRequestType")?.value?.trim(),l=t("#shiftRequestStartDate")?.value,h=t("#shiftRequestEndDate")?.value,m=t("#shiftRequestWeekDays")?.value?.trim()||null,q=t("#shiftRequestShiftDateTime")?.value||null,v=t("#shiftRequestStartTime")?.value||null,b=t("#shiftRequestEndTime")?.value||null,R=t("#shiftRequestLunchTime")?.value||null,c=t("#shiftRequestStatus")?.value?.trim(),p=t("#shiftRequestDescription")?.value?.trim()||null,e=t("#editShiftRequestError"),o=t("#editShiftRequestOk");if(e&&(e.textContent=""),o&&(o.style.display="none"),!r){e&&(e.textContent="El cÃ³digo es obligatorio.");return}if(!f){e&&(e.textContent="El tipo es obligatorio.");return}if(!l){e&&(e.textContent="La fecha de inicio es obligatoria.");return}if(!c){e&&(e.textContent="El estado es obligatorio.");return}const a=i.submitter||t('#editShiftRequestForm button[type="submit"]');a&&(a.disabled=!0);try{const s=await y(`/api/shift-requests/edit/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,type:f,startDate:l,endDate:h,weekDays:m,shiftDateTime:q,startTime:v,endTime:b,lunchTime:R,status:c,description:p})});if(!s.ok){let u="";try{u=await s.text()}catch{}throw u||(u=`Error ${s.status}`),new Error(u)}o&&(o.style.display="block"),setTimeout(()=>{d("/private/shift-requests/table-view")},600)}catch(s){e&&(e.textContent=s.message)}finally{a&&(a.disabled=!1)}}function E(){const i=t("#editShiftRequestForm");if(i){const n=t(".meta-id span")?.textContent?.trim();n&&i.setAttribute("data-id",n),i.addEventListener("submit",S)}}function T(){t(".actions .vs-secondary")?.addEventListener("click",i=>{i.preventDefault(),d("/private/shift-requests/table-view")})}(function(){E(),T()})();
