const i=(()=>{let t=!1,o=null;return r=>(t||(o=new Promise((n,l)=>{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${r}&v=weekly`,e.async=!0,e.defer=!0,e.onload=()=>{console.log("[Google Maps API] Script cargado correctamente."),t=!0,n()},e.onerror=s=>{console.error("[Google Maps API] Error al cargar el script:",s),l(new Error("Error al cargar Google Maps API"))},document.head.appendChild(e)})),o)})(),p=async()=>{const t=document.getElementById("site-map");if(!t){console.warn("[initMap] Contenedor #site-map no encontrado en el DOM.");return}try{const{Map:o}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:r,PinElement:n}=await google.maps.importLibrary("marker"),l=new o(t,{center:{lat:-33.4489,lng:-70.6693},zoom:12,mapId:googleMapsConfig.mapId,disableDefaultUI:!0});console.log("[initMap] Mapa inicializado.");const e=document.createElement("div");e.style.backgroundColor="#fff",e.style.border="1px solid grey",e.style.padding="4px 8px",e.style.borderRadius="8px",e.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)",e.style.position="absolute",e.style.top="-40px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.display="none",e.textContent="Marcador Avanzado Ejemplo";const s=new n({scale:1.5,color:"#4285F4"}),a=document.createElement("div");a.style.position="relative",a.style.width="44px",a.style.height="44px",a.appendChild(s.element),a.appendChild(e);const c=new r({map:l,position:{lat:-33.4489,lng:-70.6693},content:a});a.addEventListener("mouseenter",()=>{e.style.display="block"}),a.addEventListener("mouseleave",()=>{e.style.display="none"}),console.log("[initMap] Marcador avanzado a√±adido al mapa.")}catch(o){console.error("[initMap] Error al inicializar el mapa:",o)}};(async function(){console.log("[init] IIFE iniciado");const o=googleMapsConfig.apiKey;try{await i(o),p()}catch(r){console.error("[site-map.js] Error al cargar la API de Google Maps:",r)}})();
