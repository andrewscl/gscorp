const l=(()=>{let r=!1,o=null;return n=>(r||(o=new Promise((t,a)=>{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${n}&v=weekly`,e.async=!0,e.defer=!0,e.onload=()=>{console.log("[Google Maps API] Script cargado correctamente."),r=!0,t()},e.onerror=i=>{console.error("[Google Maps API] Error al cargar el script:",i),a(new Error("Error al cargar Google Maps API"))},document.head.appendChild(e)})),o)})(),c=async()=>{const r=document.getElementById("site-map");if(!r){console.warn("[initMap] Contenedor #site-map no encontrado en el DOM.");return}try{const{Map:o}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:n}=await google.maps.importLibrary("marker"),t=new o(r,{center:{lat:-33.4489,lng:-70.6693},zoom:12,mapId:googleMapsConfig.mapId,disableDefaultUI:!0});console.log("[initMap] Mapa inicializado.");const a=document.createElement("div");a.style.backgroundColor="#fff",a.style.border="1px solid grey",a.style.padding="4px 8px",a.style.borderRadius="8px",a.textContent="Marcador Avanzado Ejemplo";const e=new n({map:t,position:{lat:-33.4489,lng:-70.6693},content:a});console.log("[initMap] Marcador avanzado a√±adido al mapa.")}catch(o){console.error("[initMap] Error al inicializar el mapa:",o)}};(async function(){console.log("[init] IIFE iniciado");const o=googleMapsConfig.apiKey;try{await l(o),c()}catch(n){console.error("[site-map.js] Error al cargar la API de Google Maps:",n)}})();
