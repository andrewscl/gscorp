import{n as p}from"../../navigation-handler.js";import"../../auth.js";function d({container:e,path:n}){console.log("View-site.js activado"),console.log({latInput:document.getElementById("siteLat"),lonInput:document.getElementById("siteLon"),latValue:document.getElementById("siteLat")?.value,lonValue:document.getElementById("siteLon")?.value,mapDiv:document.getElementById("siteMap"),google:window.google,googleMaps:window.google?.maps});const t=e.querySelector(".vs-btn.vs-secondary[data-path]");t&&t.addEventListener("click",l=>{l.preventDefault();const o=t.getAttribute("data-path");o&&p(o)});const g=e.querySelector("#siteLat"),s=e.querySelector("#siteLon"),a=e.querySelector("#siteMap");if(a&&g&&s&&window.google&&window.google.maps){if(a._google_map)return;const l=parseFloat(g.value)||-33.45,o=parseFloat(s.value)||-70.66;console.log("Usando lat:",l,"lon:",o);const i=new google.maps.Map(a,{center:{lat:l,lng:o},zoom:15,mapTypeId:"roadmap",disableDefaultUI:!0});new google.maps.Marker({position:{lat:l,lng:o},map:i}),a._google_map=i,console.log("Google Map inicializado OK")}else console.log("Falta algÃºn elemento o Google Maps no cargado",{mapDiv:a,latInput:g,lonInput:s,google:window.google})}document.addEventListener("fragment:loaded",e=>{const{container:n,path:t}=e.detail||{};n&&d({container:n,path:t})});export{d as init};
