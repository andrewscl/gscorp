import{f as d}from"../../auth.js";import{n as f}from"../../navigation-handler.js";console.log("create-client.js cargado");const e=t=>document.querySelector(t);async function v(t){t.preventDefault();const a=e("#clientName")?.value?.trim(),c=e("#clientLegalName")?.value?.trim()||null,l=e("#clientTaxId")?.value?.trim()||null,r=e("#clientEmail")?.value?.trim()||null,s=e("#clientPhone")?.value?.trim()||null,m=!!e("#clientActive")?.checked,n=e("#createClientError"),o=e("#createClientOk");if(n&&(n.textContent=""),o&&(o.style.display="none"),!a){n&&(n.textContent="El nombre es obligatorio.");return}try{const i=await d("/api/clients/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,legalName:c,taxId:l,contactEmail:r,contactPhone:s,active:m})});if(!i.ok){const u=await i.text().catch(()=>"");throw new Error(u||"No se pudo crear el cliente")}o&&(o.style.display="block"),setTimeout(()=>{closeModal(),f("/private/clients/table-view")},600)}catch(i){n&&(n.textContent=i.message)}}function p(){e("#createClientForm")?.addEventListener("submit",v),document.addEventListener("keydown",t=>{t.key==="Escape"&&closeModal()})}(function(){p()})();
