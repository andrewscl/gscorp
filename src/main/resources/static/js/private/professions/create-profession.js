import{f as v}from"../../auth.js";import{n as a}from"../../navigation-handler.js";const e=t=>document.querySelector(t);async function b(t){t.preventDefault();const c=e("#professionName")?.value?.trim(),f=e("#professionDescription")?.value?.trim()||null,u=e("#professionCode")?.value?.trim()||null,p=e("#professionCategory")?.value?.trim()||null,l=e("#professionLevel")?.value?.trim(),m=l?Number(l):null,d=!!e("#professionActive")?.checked,o=e("#createProfessionError"),n=e("#createProfessionOk");if(o&&(o.textContent=""),n&&(n.style.display="none"),!c){o&&(o.textContent="El nombre de la profesiÃ³n es obligatorio.");return}const i=t.submitter||e('#createProfessionForm button[type="submit"]');i&&(i.disabled=!0);try{const s=await v("/api/professions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,description:f,code:u,category:p,level:m,active:d})});if(!s.ok){let r="";try{r=await s.text()}catch{}throw r||(r=`Error ${s.status}`),new Error(r)}n&&(n.style.display="block"),setTimeout(()=>{a("/private/professions/table-view")},600)}catch(s){o&&(o.textContent=s.message)}finally{i&&(i.disabled=!1)}}function y(){e("#createProfessionForm")?.addEventListener("submit",b)}function C(){e("#cancelCreateProfession")?.addEventListener("click",t=>{t.preventDefault(),a("/private/professions/table-view")})}function P(){e("#closeCreateProfession")?.addEventListener("click",t=>{t.preventDefault(),a("/private/professions/table-view")})}(function(){y(),C(),P()})();
