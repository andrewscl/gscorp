import{n as b}from"../../navigation-handler.js";import"../../auth.js";(function(){const l="private",r=()=>document.body?.dataset?.layout===l,m=()=>{let e=document.getElementById("sidebar-scrim");return e||(e=document.createElement("div"),e.id="sidebar-scrim",e.className="sidebar-scrim",document.body.appendChild(e)),e},g=()=>{r()&&(document.body.classList.add("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","true"))},n=()=>{r()&&(document.body.classList.remove("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","false"))},s=()=>{document.body.classList.contains("sidebar-open")?n():g()};document.addEventListener("click",async e=>{if(!r())return;const t=e.target.closest("[data-path]");if(!t)return;e.preventDefault();const o=t.getAttribute("data-path");if(!o)return;const a=document.querySelector(".sidebar");a&&a.querySelectorAll("details.menu-group[open]").forEach(i=>i.open=!1),n();try{await b(o,!1)}catch(i){console.error("[private-menu] navigateTo error",i),alert("No se pudo navegar a la ruta solicitada.")}}),document.addEventListener("toggle",e=>{if(!r())return;const t=e.target;if(!(t instanceof HTMLDetailsElement)||!t.classList.contains("menu-group")||!t.open)return;const o=t.closest(".menu");o&&o.querySelectorAll("details.menu-group[open]").forEach(a=>{a!==t&&(a.open=!1)})});const c=e=>{!e||e.__bound||(e.__bound=!0,e.addEventListener("click",s))},u=e=>{!e||e.__bound||(e.__bound=!0,e.addEventListener("click",s))},d=m();d.__bound||(d.__bound=!0,d.addEventListener("click",n)),document.addEventListener("keydown",e=>{e.key==="Escape"&&n()}),document.addEventListener("route:loaded",n),new MutationObserver(()=>{r()&&(c(document.getElementById("topbarToggleSidebar")),u(document.getElementById("toggleSidebar")))}).observe(document.body,{childList:!0,subtree:!0}),c(document.getElementById("topbarToggleSidebar")),u(document.getElementById("toggleSidebar"))})();
