import{n as E}from"../../navigation-handler.js";import"../../auth.js";(function(){const u="data-layout",l="private";function b(){let e=document.getElementById("sidebar-scrim");return e||(e=document.createElement("div"),e.id="sidebar-scrim",e.className="sidebar-scrim",document.body.appendChild(e)),e}function o(){document.body.classList.remove("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","false")}function m(){document.body.classList.add("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","true")}function a(){document.body.classList.contains("sidebar-open")?o():m()}function i(){if(document.body.getAttribute(u)!==l)return;const e=document.querySelector(".sidebar .menu"),r=document.querySelector(".sidebar"),p=document.getElementById("topbarToggleSidebar"),f=document.getElementById("toggleSidebar"),g=b();!e||!r||r.__bound||(r.__bound=!0,p?.addEventListener("click",a),f?.addEventListener("click",a),g.addEventListener("click",o),document.addEventListener("keydown",t=>{t.key==="Escape"&&o()}),e.addEventListener("toggle",t=>{const n=t.target;!(n instanceof HTMLDetailsElement)||!n.open||e.querySelectorAll("details.menu-group[open]").forEach(d=>{d!==n&&(d.open=!1)})}),e.addEventListener("click",async t=>{const n=t.target.closest("[data-path]");if(!n)return;t.preventDefault();const d=n.dataset.path;if(d){e.querySelectorAll("details.menu-group[open]").forEach(s=>s.open=!1),o();try{await E(d,!1)}catch(s){console.error("[private-menu] navigateTo error",s)}}}))}function c(){if(document.body.getAttribute(u)!==l)return;const e=document.getElementById("topbarToggleSidebar");!e||e.__bound||(e.__bound=!0,e.addEventListener("click",a))}document.addEventListener("route:loaded",o),document.addEventListener("sidebar:loaded",i),document.addEventListener("topbar:loaded",c),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{i(),c()},{once:!0}):(i(),c())})();
