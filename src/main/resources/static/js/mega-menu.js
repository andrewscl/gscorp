function g(){if(window.__megaMenuInit)return;window.__megaMenuInit=!0;const r=document.getElementById("navbar"),n=document.getElementById("menu-toggle"),a=document.getElementById("nav-links");if(!r||!a)return;const l=()=>window.matchMedia("(max-width: 768px)").matches;function d(){const e=r.offsetHeight||0;document.documentElement.style.setProperty("--nav-h-px",e+"px"),document.documentElement.style.setProperty("--nav-h",e+"px")}d(),window.addEventListener("resize",d),window.addEventListener("orientationchange",d);let u=!1;const m=()=>{const e=window.scrollY>60;e!==u&&(u=e,r.classList.toggle("solid",e),r.classList.toggle("transparent",!e))};window.addEventListener("scroll",m),m(),n?.setAttribute("aria-controls","nav-links"),n?.setAttribute("aria-expanded","false"),n?.setAttribute("aria-label","Abrir menú");const v=()=>{a.classList.add("open"),n?.classList.add("is-open"),n?.setAttribute("aria-expanded","true"),n?.setAttribute("aria-label","Cerrar menú"),document.documentElement.classList.add("no-scroll")},i=()=>{a.classList.remove("open"),n?.classList.remove("is-open"),n?.setAttribute("aria-expanded","false"),n?.setAttribute("aria-label","Abrir menú"),document.documentElement.classList.remove("no-scroll"),a.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(e=>e.classList.remove("open-sub")),a.querySelectorAll(".nav-item.has-mega-menu > a[aria-expanded]").forEach(e=>e.setAttribute("aria-expanded","false"))};n?.addEventListener("click",()=>{a.classList.contains("open")?i():v()}),a.addEventListener("click",e=>{const s=e.target.closest("a");if(!s)return;const o=s.closest(".nav-item.has-mega-menu"),w=o&&o.querySelector(":scope > a")===s;if(l()&&w){e.preventDefault(),e.stopPropagation();const t=o.classList.contains("open-sub");a.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(c=>{if(c!==o){c.classList.remove("open-sub");const f=c.querySelector(":scope > a[aria-expanded]");f&&f.setAttribute("aria-expanded","false")}}),o.classList.toggle("open-sub",!t),s.setAttribute("aria-expanded",String(!t));return}if(s.closest(".mega-menu")){if(s.hasAttribute("data-path")){e.preventDefault();const t=s.getAttribute("data-path");i(),t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t)}else i();return}if(s.hasAttribute("data-path")){e.preventDefault();const t=s.getAttribute("data-path");i(),t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t);return}}),document.addEventListener("click",e=>{a.classList.contains("open")&&(e.target.closest("#navbar")||i())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&i()}),window.addEventListener("popstate",i);let p=l();window.addEventListener("resize",()=>{const e=l();e!==p&&(i(),p=e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();export{g as s};
