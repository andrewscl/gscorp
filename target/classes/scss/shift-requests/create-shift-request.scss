// shift-request.scss (Sass/SCSS nested)
// Reemplazar el archivo existente con este contenido.
// Layout: LEFT arriba en dos columnas, RIGHT abajo (schedules).
// Cada day-range ocupa una línea en pantallas anchas y se adapta/colapsa en móviles.

// Variables (scoped inside .createShiftRequest for encapsulación)
.createShiftRequest {
  // Theme / tuneables
  --bg: #ffffff;
  --muted-input: #f7f9fb;
  --muted-border: #e6e9ee;
  --accent: #277bb7;
  --accent-2: #2ec5ce;
  --danger: #ef4444;
  --text: #263147;
  --radius: 12px;
  --pad: 20px;
  --max-w: 920px;

  // UI sizing tokens (use CSS vars so pueden ajustarse en runtime si hace falta)
  --control-h: 40px;
  --icon-btn-size: 34px;
  --gap: 0.9rem;

  box-sizing: border-box;
  font-family: 'Inter', system-ui, 'Helvetica Neue', Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  max-width: var(--max-w);
  width: calc(100% - 2rem);
  margin: 1rem auto;
  padding: var(--pad);
  border-radius: var(--radius);
  box-shadow: 0 12px 36px rgba(20,30,50,0.06);
  min-height: 520px;
  max-height: 86vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;

  // small scrollbar
  scrollbar-width: thin;
  scrollbar-color: rgba(120,130,150,0.18) transparent;

  &::-webkit-scrollbar { height: 8px; width: 8px; }
  &::-webkit-scrollbar-thumb { background: rgba(120,130,150,0.18); border-radius: 6px; }
  &::-webkit-scrollbar-track { background: transparent; }

  // Header
  .createShiftRequestHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .8rem;
    margin-bottom: 0.4rem;

    h3 {
      margin: 0;
      color: var(--accent);
      font-size: 1.25rem;
      font-weight: 600;
    }

    .modal-close {
      width: 40px;
      height: 40px;
      display: inline-grid;
      place-items: center;
      border-radius: 8px;
      border: 1px solid transparent;
      background: transparent;
      color: #6b7280;
      cursor: pointer;
      transition: all .12s ease;

      &:hover {
        background: rgba(39,123,183,0.06);
        color: var(--accent);
        transform: translateY(-1px);
      }
    }
  }

  // Body + generic controls
  .createShiftRequest-body { margin-top: .9rem; }

  .form-group {
    margin-bottom: 1rem;
    min-width: 0; // important for grid children
    label {
      display: block;
      margin-bottom: .36rem;
      font-weight: 600;
      color: #374151;
      font-size: .95rem;
      line-height: 1.2;
    }
  }

  input, select, textarea {
    width: 100%;
    padding: .56rem .7rem;
    border-radius: 8px;
    border: 1px solid var(--muted-border);
    background: var(--muted-input);
    color: #0f1724;
    transition: border-color .12s ease, box-shadow .12s ease;
    font-family: inherit;
    font-size: .95rem;
    height: var(--control-h);
    box-sizing: border-box;
  }

  textarea {
    min-height: 92px;
    padding: .6rem .7rem;
    height: auto;
    resize: vertical;
  }

  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 8px 26px rgba(39,123,183,0.08);
  }

  // Buttons (scoped)
  .btn-mini, .btn-primary, .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: .4rem;
    height: var(--control-h);
    padding: .42rem .9rem;
    border-radius: 8px;
    font-weight: 700;
    font-size: .95rem;
    cursor: pointer;
    border: none;
    transition: transform .08s ease, filter .12s ease;
    box-shadow: 0 6px 18px rgba(25,40,60,0.06);
  }
  .btn-mini { color: #fff; background: linear-gradient(90deg, var(--accent) 60%, var(--accent-2) 100%); }
  .btn-mini:hover { transform: translateY(-2px); }
  .btn-primary { color: #fff; background: linear-gradient(90deg, var(--accent) 60%, var(--accent-2) 100%); }
  .btn-secondary { background: #f8fafc; color: #334155; border: 1px solid #dbe6ef; }

  // ---------- Layout: LEFT arriba en 2 columnas, RIGHT debajo ----------
  .form-grid {
    display: grid;
    grid-template-columns: 1fr; // left first then right stacked
    gap: 1rem;
  }

  // Left column becomes a two-column grid for controls
  .col-left {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: var(--gap);

    // make date row span both columns and be two columns internally
    .two-col-dates {
      grid-column: 1 / -1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: .8rem;

      .date-field {
        width: 10ch;
        max-width: 100%;
        min-width: 12ch;

      }
    }

    // description spans both columns
    textarea { grid-column: 1 / -1; }
  }

  .col-right {
    margin-top: 0.15rem;
  }

  @media (max-width: 900px) {
    .col-left { grid-template-columns: 1fr; }
    .col-left .two-col-dates { grid-template-columns: 1fr; }
  }

  // helper narrow
  .form-group.narrow { max-width: 520px; }

  // Schedules panel (right)
  .schedules-panel {
    background: linear-gradient(180deg,#fbfdff,#fff);
    border-radius: 10px;
    padding: .6rem;
    border: 1px solid var(--muted-border);
    overflow-x: hidden; // prevent horizontal scroll inside modal

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .6rem;
      margin-bottom: .45rem;

      label { font-weight: 700; }
      .btn-mini { height: 36px; padding: .36rem .7rem; }
    }

    .shift-dayranges-list { width: 100%; box-sizing: border-box; margin-top: .1rem; }
  }

  // ---------- DAY-RANGE: INLINE on wide screens, responsive collapse ----------
  // Default: one line per tramo (wide screens)
  .day-range-block {
    width: 100%;
    box-sizing: border-box;
    display: grid;
    grid-template-columns: 140px 140px 120px 120px 120px 72px; // from | to | start | end | lunch | action
    gap: 0.5rem;
    align-items: center;
    padding: .5rem;
    margin-bottom: .6rem;
    border-radius: 8px;
    border: 1px solid var(--muted-border);
    background: #fff;

    .form-group { margin: 0; min-width: 0; }
    label { display:block; font-size: .86rem; margin-bottom: .28rem; font-weight: 600; }
    select, input[type="time"], input[type="date"] {
      height: var(--control-h);
      padding: .42rem .7rem;
      border-radius: 8px;
      box-sizing: border-box;
      width: 100%;
    }

    .remove-day-range {
      height: 38px;
      padding: .28rem .6rem;
      border-radius: 8px;
      background: var(--danger);
      color: #fff;
      border: none;
      cursor: pointer;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
  }

  // progressively adapt when container narrows
  @media (max-width: 1100px) {
    .day-range-block {
      grid-template-columns: 120px 120px 1fr 1fr 1fr 72px;
    }
  }

  // mobile: collapse to multiple rows to avoid horizontal overflow
  @media (max-width: 800px) {
    .day-range-block {
      grid-template-columns: 1fr 1fr 1fr; // 3 columns, auto flow creating multiple rows
      grid-auto-rows: auto;
    }

    .day-range-block .remove-day-range {
      grid-column: 3 / 4;
      justify-self: end;
    }

    .day-range-block label { font-size: .84rem; }
  }

  // Input with icon coordination
  .input-with-icon {
    position: relative;

    .input-icon-wrap { position: relative; display: block; }

    .icon-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      height: var(--icon-btn-size);
      width: var(--icon-btn-size);
      display: inline-grid;
      place-items: center;
      border-radius: 8px;
      border: none;
      background: transparent;
      color: #54606a;
      cursor: pointer;
    }

    .icon-btn:hover { background: rgba(39,123,183,0.06); color: var(--accent); }
  }

  // Hide native pickers to avoid duplicate icons
  input[type="date"]::-webkit-calendar-picker-indicator,
  input[type="time"]::-webkit-calendar-picker-indicator {
    display: none !important;
    -webkit-appearance: none !important;
  }
  input[type="date"], input[type="time"] { -moz-appearance: textfield; appearance: none; }

  // Footer actions
  .modal-footer {
    display: flex;
    gap: .75rem;
    justify-content: flex-end;
    margin-top: .6rem;
  }

  .form-error { color: #b91c1c; font-weight: 700; margin-top: .5rem; min-height: 1.2em; }
  .form-ok { color: #059669; font-weight: 700; margin-top: .8rem; }
}

/* small-screen fallbacks */
@media (max-width: 900px) {
  .createShiftRequest { padding: 14px; margin: 1rem; }
  .form-group.narrow { max-width: 100%; }
  .day-range-block { padding: .6rem; }
}