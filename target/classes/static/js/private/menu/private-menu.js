import{n as v}from"../../navigation-handler.js";import"../../auth.js";function m(){const t=document.body;if(!t||t.dataset.layout!=="private")return;const c=e=>document.getElementById(e),p=document.querySelector(".sidebar"),a=document.querySelector(".sidebar .menu"),i=c("topbarToggleSidebar"),b=c("toggleSidebar");let n=c("sidebar-scrim");if(n||(n=document.createElement("div"),n.id="sidebar-scrim",n.className="sidebar-scrim",document.body.appendChild(n)),!p||!i||!a){const e=()=>s();document.addEventListener("topbar:loaded",e,{once:!0}),document.addEventListener("sidebar:loaded",e,{once:!0});return}if(t.__drawerBound)return;t.__drawerBound=!0;const f=()=>{t.classList.add("sidebar-open"),i.setAttribute("aria-expanded","true")},d=()=>{t.classList.remove("sidebar-open"),i.setAttribute("aria-expanded","false")},l=()=>t.classList.contains("sidebar-open")?d():f();i.addEventListener("click",l),b?.addEventListener("click",l),n.addEventListener("click",d),document.addEventListener("keydown",e=>{e.key==="Escape"&&d()}),document.addEventListener("route:loaded",d),a.addEventListener("toggle",e=>{const r=e.target;!(r instanceof HTMLDetailsElement)||!r.open||a.querySelectorAll("details.menu-group[open]").forEach(o=>{o!==r&&(o.open=!1)})}),a.addEventListener("click",async e=>{const r=e.target.closest("[data-path]");if(!r)return;e.preventDefault();const o=r.dataset.path;if(o){a.querySelectorAll("details.menu-group[open]").forEach(u=>u.open=!1),d();try{await v(o,!1)}catch(u){console.error("[private-menu] navigateTo error",u)}}})}function s(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m,{once:!0}):requestAnimationFrame(m)}s();document.addEventListener("topbar:loaded",s);document.addEventListener("sidebar:loaded",s);
