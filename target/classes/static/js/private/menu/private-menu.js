import{n as m}from"../../navigation-handler.js";import"../../auth.js";(function(){const u="private",r=()=>document.body?.dataset?.layout===u,l=()=>{r()&&(document.body.classList.add("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","true"))},o=()=>{r()&&(document.body.classList.remove("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","false"))},i=()=>{document.body.classList.contains("sidebar-open")?o():l()};document.addEventListener("click",async e=>{if(!r())return;const a=e.target.closest("[data-path]");if(!a)return;e.preventDefault();const n=a.getAttribute("data-path");if(n){o();try{await m(n,!1)}catch(d){console.error("[private-menu] navigateTo error",d),alert("No se pudo navegar a la ruta solicitada.")}}}),document.addEventListener("click",e=>{if(!r())return;const a=e.target.closest("summary.menu-item");if(!a)return;const n=a.parentElement;!(n instanceof HTMLDetailsElement)||!n.classList.contains("menu-group")||n.open||document.querySelectorAll(".sidebar .menu-group[open]").forEach(d=>{d!==n&&(d.open=!1)})});const s=e=>{!e||e.__bound||(e.__bound=!0,e.addEventListener("click",i))},c=e=>{!e||e.__bound||(e.__bound=!0,e.addEventListener("click",i))};let t=document.getElementById("sidebar-scrim");t||(t=document.createElement("div"),t.id="sidebar-scrim",t.className="sidebar-scrim",document.body.appendChild(t)),t.__bound||(t.__bound=!0,t.addEventListener("click",o)),document.addEventListener("keydown",e=>{e.key==="Escape"&&o()}),document.addEventListener("route:loaded",o),new MutationObserver(()=>{r()&&(s(document.getElementById("topbarToggleSidebar")),c(document.getElementById("toggleSidebar")))}).observe(document.body,{childList:!0,subtree:!0}),s(document.getElementById("topbarToggleSidebar")),c(document.getElementById("toggleSidebar"))})();
