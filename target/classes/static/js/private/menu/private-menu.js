import{n as g}from"../../navigation-handler.js";import"../../auth.js";(function(){const u="private",n=()=>document.body?.dataset?.layout===u,l=()=>{let e=document.getElementById("sidebar-scrim");return e||(e=document.createElement("div"),e.id="sidebar-scrim",e.className="sidebar-scrim",document.body.appendChild(e)),e},m=()=>{n()&&(document.body.classList.add("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","true"))},r=()=>{n()&&(document.body.classList.remove("sidebar-open"),document.getElementById("topbarToggleSidebar")?.setAttribute("aria-expanded","false"))},i=()=>{document.body.classList.contains("sidebar-open")?r():m()};document.addEventListener("click",async e=>{if(!n())return;const t=e.target.closest("[data-path]");if(!t)return;e.preventDefault();const o=t.getAttribute("data-path");if(o){r();try{await g(o,!1)}catch(d){console.error("[private-menu] navigateTo error",d),alert("No se pudo navegar a la ruta solicitada.")}}}),document.addEventListener("toggle",e=>{if(!n())return;const t=e.target;if(!(t instanceof HTMLDetailsElement)||!t.classList.contains("menu-group")||!t.open)return;const o=t.closest(".menu");o&&o.querySelectorAll("details.menu-group[open]").forEach(d=>{d!==t&&(d.open=!1)})});const s=e=>{!e||e.__bound||(e.__bound=!0,e.addEventListener("click",i))},c=e=>{!e||e.__bound||(e.__bound=!0,e.addEventListener("click",i))},a=l();a.__bound||(a.__bound=!0,a.addEventListener("click",r)),document.addEventListener("keydown",e=>{e.key==="Escape"&&r()}),document.addEventListener("route:loaded",r),new MutationObserver(()=>{n()&&(s(document.getElementById("topbarToggleSidebar")),c(document.getElementById("toggleSidebar")))}).observe(document.body,{childList:!0,subtree:!0}),s(document.getElementById("topbarToggleSidebar")),c(document.getElementById("toggleSidebar"))})();
