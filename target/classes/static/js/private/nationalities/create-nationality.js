import{f as y}from"../../auth.js";import{n as l}from"../../navigation-handler.js";const e=t=>document.querySelector(t);async function d(t){t.preventDefault();const s=e("#nationalityName")?.value?.trim(),c=e("#nationalityIsoCode")?.value?.trim()||null,i=e("#createNationalityError"),n=e("#createNationalityOk");if(i&&(i.textContent=""),n&&(n.style.display="none"),!s){i&&(i.textContent="El nombre de la nacionalidad es obligatorio.");return}const o=t.submitter||e('#createNationalityForm button[type="submit"]');o&&(o.disabled=!0);try{const a=await y("/api/nationalities/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,isoCode:c})});if(!a.ok){let r="";try{r=await a.text()}catch{}throw r||(r=`Error ${a.status}`),new Error(r)}n&&(n.style.display="block"),setTimeout(()=>{l("/private/nationalities/table-view")},600)}catch(a){i&&(i.textContent=a.message)}finally{o&&(o.disabled=!1)}}function u(){e("#createNationalityForm")?.addEventListener("submit",d)}function f(){e("#cancelCreateNationality")?.addEventListener("click",t=>{t.preventDefault(),l("/private/nationalities/table-view")})}function m(){e("#closeCreateNationality")?.addEventListener("click",t=>{t.preventDefault(),l("/private/nationalities/table-view")})}(function(){u(),f(),m()})();
