import{n as s}from"../../navigation-handler.js";import"../../auth.js";const u=500;window.__forecastTable||(window.__forecastTable={inited:!1});function m(t){const n=new URLSearchParams;return Object.entries(t).forEach(([e,o])=>{if(o==null)return;const i=String(o).trim();i!==""&&n.set(e,i)}),n.toString()}function r(t,n=!1){if(t){try{if(typeof s=="function"){s(t,n);return}}catch(e){console.warn("[forecast-table] navigateTo fall√≥, usando location.href",e)}window.location.href=t}}function p(t){const e=t.currentTarget?.dataset?.path||window.location.pathname,o=document.getElementById("filter-from")?.value,i=document.getElementById("filter-to")?.value,a=document.getElementById("filter-size"),d=a&&a.value?a.value:u,c=m({from:o,to:i,size:d}),f=c?e+"?"+c:e;r(f,!1)}function y(t){const n=t.target.closest(".action-btn");if(!n)return;const e=n.dataset.path||n.getAttribute("data-path");e&&r(e,!0)}function g(t){if(t.key!=="Enter")return;const n=t.target.id;if(["filter-from","filter-to","filter-zone","filter-size"].includes(n)){t.preventDefault();const e=document.getElementById("applyFiltersBtn");e&&e.click()}}function E(){if(window.__forecastTable.inited)return;window.__forecastTable.inited=!0;const t=document.getElementById("applyFiltersBtn");t&&t.addEventListener("click",p);const n=document.getElementById("createForecastBtn");n&&n.addEventListener("click",function(){const e=this.dataset.path||this.getAttribute("data-path");e&&r(e,!0)}),document.addEventListener("click",y),document.addEventListener("keydown",g)}function l(){E()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
