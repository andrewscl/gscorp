const c=(()=>{let o=!1,a=null;return r=>(o||(a=new Promise((t,n)=>{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${r}&v=weekly`,e.async=!0,e.defer=!0,e.onload=()=>{console.log("[Google Maps API] Script cargado correctamente."),o=!0,t()},e.onerror=i=>{console.error("[Google Maps API] Error al cargar el script:",i),n(new Error("Error al cargar Google Maps API"))},document.head.appendChild(e)})),a)})(),l=async()=>{const o=document.getElementById("site-map");if(!o){console.warn("[initMap] Contenedor #site-map no encontrado en el DOM.");return}try{const{Map:a}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:r}=await google.maps.importLibrary("marker"),t=new a(o,{center:{lat:-33.4489,lng:-70.6693},zoom:12,mapId:googleMapsConfig.mapId,disableDefaultUI:!0});console.log("[initMap] Mapa inicializado.");const n=document.createElement("div");n.textContent="Este es un marcador avanzado",new r({map:t,position:{lat:-33.4489,lng:-70.6693},content:n}),console.log("[initMap] Marcador avanzado a√±adido al mapa.")}catch(a){console.error("[initMap] Error al inicializar el mapa:",a)}};(async function(){console.log("[init] IIFE iniciado");const a=googleMapsConfig.apiKey;try{await c(a),l()}catch(r){console.error("[site-map.js] Error al cargar la API de Google Maps:",r)}})();
