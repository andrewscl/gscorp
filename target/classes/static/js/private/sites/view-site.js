import{n as p}from"../../navigation-handler.js";import"../../auth.js";window._viewSiteInitRegistered||(document.addEventListener("fragment:loaded",e=>{const{container:n,path:t}=e.detail||{};n&&d({container:n,path:t})}),window._viewSiteInitRegistered=!0);function d({container:e,path:n}){console.log("View-site.js activado");const t=e.querySelector(".vs-btn.vs-secondary[data-path]");t&&t.addEventListener("click",l=>{l.preventDefault();const s=t.getAttribute("data-path");s&&p(s)});const a=e.querySelector("#siteLat"),i=e.querySelector("#siteLon"),o=e.querySelector("#siteMap");o&&o._google_map&&(o._google_map=null,o.firstChild&&(o.innerHTML="")),window._pendingMapInit={latInput:a,lonInput:i,mapDiv:o},window.google&&window.google.maps&&window.onGoogleMapsReady()}window.onGoogleMapsReady=function(){const e=window._pendingMapInit;if(!e)return;const{latInput:n,lonInput:t,mapDiv:a}=e;if(a&&n&&t){if(a._google_map)return;const i=parseFloat(n.value)||-33.45,o=parseFloat(t.value)||-70.66,l=new google.maps.Map(a,{center:{lat:i,lng:o},zoom:15,mapTypeId:"roadmap",disableDefaultUI:!0});new google.maps.Marker({position:{lat:i,lng:o},map:l}),a._google_map=l,console.log("Google Map inicializado OK")}else console.log("Fragmento sin mapa o sin coordenadas, no se inicializa Google Maps")};export{d as init};
