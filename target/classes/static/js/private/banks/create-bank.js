import{f as k}from"../../auth.js";import{n as c}from"../../navigation-handler.js";const e=t=>document.querySelector(t);async function m(t){t.preventDefault();const s=e("#bankName")?.value?.trim(),l=e("#bankCode")?.value?.trim(),d=!!e("#bankActive")?.checked,o=e("#bankLogo");let r=null;o&&o.files&&o.files[0]&&(r=o.files[0]);const n=e("#createBankError"),i=e("#createBankOk");if(n&&(n.textContent=""),i&&(i.style.display="none"),!s){n&&(n.textContent="El nombre del banco es obligatorio.");return}if(!l){n&&(n.textContent="El cÃ³digo del banco es obligatorio.");return}try{const a=new FormData;a.append("name",s),a.append("code",l),a.append("active",d),r&&a.append("logo",r);const f=await k("/api/banks/create",{method:"POST",body:a});if(!f.ok){const b=await f.text().catch(()=>"");throw new Error(b||"No se pudo crear el banco")}i&&(i.style.display="block"),setTimeout(()=>{c("/private/banks/table-view")},600)}catch(a){n&&(n.textContent=a.message)}}function p(){e("#createBankForm")?.addEventListener("submit",m)}function u(){e("#cancelCreateBank")?.addEventListener("click",t=>{t.preventDefault(),c("/private/banks/table-view")})}function v(){e("#closeCreateBank")?.addEventListener("click",t=>{t.preventDefault(),c("/private/banks/table-view")})}(function(){p(),u(),v()})();
