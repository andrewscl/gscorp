import{f as k}from"../../auth.js";import{n as f}from"../../navigation-handler.js";console.log("create-bank.js cargado");const t=a=>document.querySelector(a);async function m(a){a.preventDefault();const c=t("#bankName")?.value?.trim(),s=t("#bankCode")?.value?.trim(),d=!!t("#bankActive")?.checked,o=t("#bankLogo");let r=null;o&&o.files&&o.files[0]&&(r=o.files[0]);const e=t("#createBankError"),i=t("#createBankOk");if(e&&(e.textContent=""),i&&(i.style.display="none"),!c){e&&(e.textContent="El nombre del banco es obligatorio.");return}if(!s){e&&(e.textContent="El cÃ³digo del banco es obligatorio.");return}try{const n=new FormData;n.append("name",c),n.append("code",s),n.append("active",d),r&&n.append("logo",r);const l=await k("/api/banks/create",{method:"POST",body:n});if(!l.ok){const b=await l.text().catch(()=>"");throw new Error(b||"No se pudo crear el banco")}i&&(i.style.display="block"),setTimeout(()=>{f("/private/banks/table-view")},600)}catch(n){e&&(e.textContent=n.message)}}function p(){t("#createBankForm")?.addEventListener("submit",m)}function u(){t("#cancelCreateBank")?.addEventListener("click",a=>{a.preventDefault(),f("/private/banks/table-view")})}(function(){p(),u()})();
