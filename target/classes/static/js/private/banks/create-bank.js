import{f as m}from"../../auth.js";import{n as b}from"../../navigation-handler.js";console.log("create-bank.js cargado");const o=n=>document.querySelector(n);async function k(n){n.preventDefault();const c=o("#bankName")?.value?.trim(),s=o("#bankCode")?.value?.trim(),f=!!o("#bankActive")?.checked,a=o("#bankLogo");let r=null;a&&a.files&&a.files[0]&&(r=a.files[0]);const e=o("#createBankError"),i=o("#createBankOk");if(e&&(e.textContent=""),i&&(i.style.display="none"),!c){e&&(e.textContent="El nombre del banco es obligatorio.");return}if(!s){e&&(e.textContent="El cÃ³digo del banco es obligatorio.");return}try{const t=new FormData;t.append("name",c),t.append("code",s),t.append("active",f),r&&t.append("logo",r);const l=await m("/api/banks/create",{method:"POST",body:t});if(!l.ok){const d=await l.text().catch(()=>"");throw new Error(d||"No se pudo crear el banco")}i&&(i.style.display="block"),setTimeout(()=>{b("/private/banks/table-view")},600)}catch(t){e&&(e.textContent=t.message)}}function p(){o("#createBankForm")?.addEventListener("submit",k)}(function(){p()})();
