function p(){if(window.__megaMenuInit)return;window.__megaMenuInit=!0;const r=document.getElementById("navbar"),a=document.getElementById("menu-toggle"),s=document.getElementById("nav-links");if(!r||!s)return;const l=()=>window.matchMedia("(max-width: 768px)").matches;function n(){const e=Math.round(r.getBoundingClientRect().height)||0;document.documentElement.style.setProperty("--nav-h-px",e+"px"),document.documentElement.style.setProperty("--nav-h",e+"px")}n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),window.addEventListener("load",n),document.addEventListener("route:loaded",n),document.addEventListener("topbar:loaded",n),document.fonts&&document.fonts.ready&&document.fonts.ready.then(n).catch(()=>{}),setTimeout(n,0),setTimeout(n,250);let c=!1;const u=()=>{const e=window.scrollY>60;e!==c&&(c=e,r.classList.toggle("solid",e),r.classList.toggle("transparent",!e),n())};window.addEventListener("scroll",u),u(),a?.setAttribute("aria-controls","nav-links"),a?.setAttribute("aria-expanded","false"),a?.setAttribute("aria-label","Abrir menú");const f=()=>{s.classList.add("open"),a?.classList.add("is-open"),a?.setAttribute("aria-expanded","true"),a?.setAttribute("aria-label","Cerrar menú"),document.documentElement.classList.add("no-scroll"),n()},i=()=>{s.classList.remove("open"),a?.classList.remove("is-open"),a?.setAttribute("aria-expanded","false"),a?.setAttribute("aria-label","Abrir menú"),document.documentElement.classList.remove("no-scroll"),s.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(e=>e.classList.remove("open-sub")),s.querySelectorAll(".nav-item.has-mega-menu > a[aria-expanded]").forEach(e=>e.setAttribute("aria-expanded","false"))};a?.addEventListener("click",()=>{s.classList.contains("open")?i():f()}),s.querySelectorAll(".nav-item.has-mega-menu > a").forEach(e=>{e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false")}),s.addEventListener("click",e=>{const o=e.target.closest("a");if(!o)return;const d=o.closest(".nav-item.has-mega-menu"),g=d&&d.querySelector(":scope > a")===o;if(l()&&g){e.preventDefault(),e.stopPropagation();const t=d.classList.contains("open-sub");d.classList.toggle("open-sub",!t),o.setAttribute("aria-expanded",String(!t));return}if(o.closest(".mega-menu")){if(o.hasAttribute("data-path")){e.preventDefault();const t=o.getAttribute("data-path");i(),t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t)}else i();return}if(o.hasAttribute("data-path")){e.preventDefault();const t=o.getAttribute("data-path");i(),t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t);return}}),document.addEventListener("click",e=>{s.classList.contains("open")&&(e.target.closest("#navbar")||i())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&i()}),window.addEventListener("popstate",i);let m=l();window.addEventListener("resize",()=>{const e=l();e!==m&&(i(),m=e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();export{p as s};
