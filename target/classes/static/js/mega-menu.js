function c(){if(window.__megaMenuInit)return;window.__megaMenuInit=!0;const l=document.getElementById("navbar"),n=document.getElementById("menu-toggle"),i=document.getElementById("nav-links");if(!l)return;const o=()=>window.matchMedia("(max-width: 768px)").matches;let d=!1;const u=()=>{const e=window.scrollY>60;e!==d&&(d=e,l.classList.toggle("solid",e),l.classList.toggle("transparent",!e))};window.addEventListener("scroll",u),u();const f=Array.from(document.querySelectorAll(".nav-item.has-mega-menu > a")),m=e=>{document.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(s=>{s!==e&&(s.classList.remove("open-sub"),s.querySelector(":scope > a")?.setAttribute("aria-expanded","false"))})};let a;if(n&&i){n.setAttribute("aria-controls","nav-links"),n.setAttribute("aria-expanded","false"),n.setAttribute("aria-label","Abrir menú");const e=()=>{i.classList.add("open"),n.classList.add("is-open"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label","Cerrar menú"),document.documentElement.classList.add("no-scroll")};a=()=>{i.classList.remove("open"),n.classList.remove("is-open"),n.setAttribute("aria-expanded","false"),n.setAttribute("aria-label","Abrir menú"),document.documentElement.classList.remove("no-scroll"),m()};const s=()=>i.classList.contains("open")?a():e();n.addEventListener("click",s),i.addEventListener("click",t=>{const r=t.target.closest("a");if(!r)return;const p=r.closest(".nav-item.has-mega-menu"),b=p&&p.querySelector(":scope > a")===r;if(o()&&b){t.preventDefault();return}r.hasAttribute("data-path")&&t.preventDefault(),a()}),document.addEventListener("click",t=>{i.classList.contains("open")&&(t.target.closest("#navbar")||a())}),document.addEventListener("keydown",t=>{t.key==="Escape"&&a()}),window.addEventListener("resize",()=>{o()||a()}),window.addEventListener("popstate",a)}f.forEach(e=>{e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.addEventListener("click",s=>{if(!o())return;s.preventDefault();const t=e.closest(".nav-item.has-mega-menu"),r=!t.classList.contains("open-sub");m(t),t.classList.toggle("open-sub",r),e.setAttribute("aria-expanded",String(r))}),e.addEventListener("keydown",s=>{o()&&(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),e.click())})}),window.setupMegamenu=c}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>c()):c();export{c as s};
