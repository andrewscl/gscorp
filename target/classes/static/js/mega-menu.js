function f(){if(window.__megaMenuInit)return;window.__megaMenuInit=!0;const r=document.getElementById("navbar"),n=document.getElementById("menu-toggle"),s=document.getElementById("nav-links");if(!r||!s)return;const c=()=>window.matchMedia("(max-width: 768px)").matches;function d(){const e=r.offsetHeight||0;document.documentElement.style.setProperty("--nav-h-px",e+"px"),document.documentElement.style.setProperty("--nav-h",e+"px")}d(),window.addEventListener("resize",d),window.addEventListener("orientationchange",d);let u=!1;const m=()=>{const e=window.scrollY>60;e!==u&&(u=e,r.classList.toggle("solid",e),r.classList.toggle("transparent",!e))};window.addEventListener("scroll",m),m(),n?.setAttribute("aria-controls","nav-links"),n?.setAttribute("aria-expanded","false"),n?.setAttribute("aria-label","Abrir menú");const w=()=>{s.classList.add("open"),n?.classList.add("is-open"),n?.setAttribute("aria-expanded","true"),n?.setAttribute("aria-label","Cerrar menú"),document.documentElement.classList.add("no-scroll")},i=()=>{s.classList.remove("open"),n?.classList.remove("is-open"),n?.setAttribute("aria-expanded","false"),n?.setAttribute("aria-label","Abrir menú"),document.documentElement.classList.remove("no-scroll"),s.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(e=>e.classList.remove("open-sub")),s.querySelectorAll(".nav-item.has-mega-menu > a[aria-expanded]").forEach(e=>e.setAttribute("aria-expanded","false"))};n?.addEventListener("click",()=>{s.classList.contains("open")?i():w()}),s.addEventListener("click",e=>{const a=e.target.closest("a");if(!a)return;const o=a.closest(".nav-item.has-mega-menu"),v=o&&o.querySelector(":scope > a")===a;if(c()&&v){e.preventDefault(),a.setAttribute("aria-haspopup","true");const t=!o.classList.contains("open-sub");s.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(l=>{l!==o&&l.classList.remove("open-sub")}),o.classList.toggle("open-sub",t),a.setAttribute("aria-expanded",String(t));return}if(a.closest(".mega-menu")){if(a.hasAttribute("data-path")){e.preventDefault();const t=a.getAttribute("data-path");try{t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t)}catch{}}i();return}if(a.hasAttribute("data-path")){e.preventDefault();const t=a.getAttribute("data-path");i();try{t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t)}catch{}return}i()}),document.addEventListener("click",e=>{s.classList.contains("open")&&(e.target.closest("#navbar")||i())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&i()}),window.addEventListener("popstate",i);let p=c();window.addEventListener("resize",()=>{const e=c();e!==p&&(i(),p=e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();export{f as s};
