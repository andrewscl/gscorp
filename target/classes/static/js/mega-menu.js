function u(){if(window.__megaMenuInit)return;window.__megaMenuInit=!0;const i=document.getElementById("navbar"),t=document.getElementById("menu-toggle"),n=document.getElementById("nav-links");if(!i||!n)return;const m=()=>window.matchMedia("(max-width: 768px)").matches;function r(){const e=i.offsetHeight||0;document.documentElement.style.setProperty("--nav-h-px",e+"px")}r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r);let l=!1;const c=()=>{const e=window.scrollY>60;e!==l&&(l=e,i.classList.toggle("solid",e),i.classList.toggle("transparent",!e))};window.addEventListener("scroll",c),c(),t?.setAttribute("aria-controls","nav-links"),t?.setAttribute("aria-expanded","false"),t?.setAttribute("aria-label","Abrir menú");const p=()=>{n.classList.add("open"),t?.classList.add("is-open"),t?.setAttribute("aria-expanded","true"),t?.setAttribute("aria-label","Cerrar menú"),document.documentElement.classList.add("no-scroll")},s=()=>{n.classList.remove("open"),t?.classList.remove("is-open"),t?.setAttribute("aria-expanded","false"),t?.setAttribute("aria-label","Abrir menú"),document.documentElement.classList.remove("no-scroll"),n.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(e=>e.classList.remove("open-sub"))};t?.addEventListener("click",()=>{n.classList.contains("open")?s():p()}),n.addEventListener("click",e=>{const a=e.target.closest("a");if(!a)return;const o=a.closest(".nav-item.has-mega-menu"),v=o&&o.querySelector(":scope > a")===a;if(m()&&v){e.preventDefault();const f=!o.classList.contains("open-sub");n.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(d=>{d!==o&&d.classList.remove("open-sub")}),o.classList.toggle("open-sub",f);return}if(a.closest(".mega-menu")){a.hasAttribute("data-path")&&e.preventDefault(),s(),window.scrollTo({top:0});return}a.hasAttribute("data-path")&&e.preventDefault(),s()}),document.addEventListener("click",e=>{n.classList.contains("open")&&(e.target.closest("#navbar")||s())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s()}),window.addEventListener("popstate",s)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();export{u as s};
