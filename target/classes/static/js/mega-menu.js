function v(){if(window.__megaMenuInit)return;window.__megaMenuInit=!0;const d=document.getElementById("navbar"),n=document.getElementById("menu-toggle"),a=document.getElementById("nav-links");if(!d||!a)return;const l=()=>window.matchMedia("(max-width: 768px)").matches;function i(){const e=d.offsetHeight||0;document.documentElement.style.setProperty("--nav-h-px",e+"px"),document.documentElement.style.setProperty("--nav-h",e+"px")}i(),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),window.addEventListener("load",i),document.addEventListener("route:loaded",i),document.addEventListener("topbar:loaded",i),document.fonts&&document.fonts.ready&&document.fonts.ready.then(i).catch(()=>{});let u=!1;const m=()=>{const e=window.scrollY>60;e!==u&&(u=e,d.classList.toggle("solid",e),d.classList.toggle("transparent",!e))};window.addEventListener("scroll",m),m(),n?.setAttribute("aria-controls","nav-links"),n?.setAttribute("aria-expanded","false"),n?.setAttribute("aria-label","Abrir menú");const w=()=>{a.classList.add("open"),n?.classList.add("is-open"),n?.setAttribute("aria-expanded","true"),n?.setAttribute("aria-label","Cerrar menú"),document.documentElement.classList.add("no-scroll")},o=()=>{a.classList.remove("open"),n?.classList.remove("is-open"),n?.setAttribute("aria-expanded","false"),n?.setAttribute("aria-label","Abrir menú"),document.documentElement.classList.remove("no-scroll"),a.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(e=>e.classList.remove("open-sub")),a.querySelectorAll(".nav-item.has-mega-menu > a[aria-expanded]").forEach(e=>e.setAttribute("aria-expanded","false"))};n?.addEventListener("click",()=>{a.classList.contains("open")?o():w()}),a.addEventListener("click",e=>{const s=e.target.closest("a");if(!s)return;const r=s.closest(".nav-item.has-mega-menu"),g=r&&r.querySelector(":scope > a")===s;if(l()&&g){e.preventDefault(),e.stopPropagation();const t=r.classList.contains("open-sub");a.querySelectorAll(".nav-item.has-mega-menu.open-sub").forEach(c=>{if(c!==r){c.classList.remove("open-sub");const f=c.querySelector(":scope > a[aria-expanded]");f&&f.setAttribute("aria-expanded","false")}}),r.classList.toggle("open-sub",!t),s.setAttribute("aria-expanded",String(!t));return}if(s.closest(".mega-menu")){if(s.hasAttribute("data-path")){e.preventDefault();const t=s.getAttribute("data-path");o(),t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t)}else o();return}if(s.hasAttribute("data-path")){e.preventDefault();const t=s.getAttribute("data-path");o(),t&&typeof window.navigateTo=="function"?window.navigateTo(t):t&&(window.location.href=t);return}}),document.addEventListener("click",e=>{a.classList.contains("open")&&(e.target.closest("#navbar")||o())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&o()}),window.addEventListener("popstate",o);let p=l();window.addEventListener("resize",()=>{const e=l();e!==p&&(o(),p=e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();export{v as s};
