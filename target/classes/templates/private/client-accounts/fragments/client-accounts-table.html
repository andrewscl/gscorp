<div th:fragment="content" class="client-accounts-table">
  <div class="client-accounts-header">
    <h2>
      <!-- Icono cuentas -->
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="vertical-align:-6px;margin-right:.5rem">
        <circle cx="12" cy="12" r="10" fill="#e6f6ff"/>
        <path d="M12 7a3 3 0 100 6 3 3 0 000-6zM5 19a7 7 0 0114 0" stroke="#0ea5e9" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Cuentas de cliente
    </h2>

    <!-- Navega a la página de creación vía data-path -->
    <button type="button" class="btn-primary" data-path="/private/client-accounts/create" id="createClientAccountBtn">
      <svg width="18" height="18" fill="none" stroke="#fff" stroke-width="2" style="vertical-align:middle;margin-right:.35rem">
        <circle cx="9" cy="9" r="8" fill="#06b6d4" stroke="none"/>
        <path d="M9 5v8M5 9h8" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Crear Cuenta
    </button>
  </div>

  <div class="client-accounts-table-container">
    <table class="client-accounts-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Cliente</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="acct : ${accounts}" th:data-id="${acct.id}">

          <td th:text="${acct.id}">1</td>
          <td th:text="${acct.name}">Nombre cuenta</td>
          <!-- Usar clientName si pasas DTO; fallback seguro si pasas entidad -->
          <td th:text="${acct.clientName != null ? acct.clientName : (acct.client != null ? acct.client.name : '—')}">Cliente</td>

          <td class="actions">
            <!-- Navegación SPA con data-path -->
            <button type="button" class="btn-link" th:attr="data-path=@{/private/client-accounts/show/{id}(id=${acct.id})}">Ver</button>

            <button type="button" class="btn-link"
                            th:attr="data-path=@{/private/client-accounts/edit/{id}(id=${acct.id})}"
                            th:if="${#authorization.expression('hasRole(''ADMINISTRATOR'')')}">Editar</button>
          </td>

        </tr>
      </tbody>
    </table>
  </div>
</div>