<section th:fragment="content" class="detail-section view-client-account">

  <h2>Ver Cuenta de Cliente</h2>
  <p class="meta-id"><strong>ID:</strong> <span th:text="${clientAccount.id}">1</span></p>

  <form id="viewClientAccountForm" class="card form">

    <!-- Nombre (solo lectura) -->
    <div class="form-group">
      <label>Nombre</label>
      <span class="readonly-field" th:text="${clientAccount.name != null ? clientAccount.name : '—'}"></span>
      <small>Nombre de la cuenta interna.</small>
    </div>

    <!-- Cliente (vínculo a cliente si existe) -->
    <div class="form-group">
      <label>Cliente</label>
      <div th:if="${clientAccount.clientName != null}">
        <button type="button"
                class="readonly-link"
                th:attr="data-path=@{/private/clients/show/{id}(id=${clientAccount.clientId})}">
          <span th:text="${clientAccount.clientName}">Nombre Cliente</span>
        </button>
      </div>
      <div th:if="${clientAccount.clientName == null and clientAccount.client != null}">
        <button type="button"
                class="readonly-link"
                th:attr="data-path=@{/private/clients/show/{id}(id=${clientAccount.client.id})}">
          <span th:text="${clientAccount.client.name}">Nombre Cliente</span>
        </button>
      </div>
      <div th:if="${clientAccount.clientName == null and clientAccount.client == null}">
        <span class="readonly-field">—</span>
      </div>
      <small>Cliente asociado a esta cuenta.</small>
    </div>

    <!-- Notas -->
    <div class="form-group">
      <label>Notas</label>
      <textarea id="clientAccountNotes" name="notes" readonly tabindex="-1"
                th:text="${clientAccount.notes != null ? clientAccount.notes : ''}"></textarea>
    </div>

    <!-- Acciones (sin eliminar) -->
    <div class="actions">
      <button type="button" class="vs-btn vs-secondary" data-path="/private/client-accounts/table-view">Volver al listado</button>
      <button type="button" class="vs-btn vs-primary"
              th:attr="data-path=@{/private/client-accounts/edit/{id}(id=${clientAccount.id})}">
        Editar
      </button>
    </div>

    <div id="viewClientAccountError" class="form-error"></div>
    <div id="viewClientAccountOk" class="form-ok" style="display:none;">Datos cargados ✅</div>
  </form>

  <style>
    .detail-section.view-client-account { max-width:980px; margin:0 auto; }
    .readonly-field { display:inline-block; padding:.25rem .5rem; background:#fafafa; border:1px solid #eee; border-radius:4px; color:#111827; }
    .readonly-link { background:transparent; border:1px solid transparent; padding:.25rem .5rem; border-radius:4px; cursor:pointer; color:#0ea5e9; font-weight:600; }
    .readonly-link:hover { text-decoration:underline; }
    textarea[readonly] { width:100%; min-height:120px; background:#fff; border:1px solid #e6e6e6; padding:.5rem; border-radius:4px; resize:vertical; color:#111827; }
    .form-group { margin-bottom:1rem; }
    .meta-id { margin-bottom:.8rem; color:#475569; }
    .actions { margin-top:1rem; display:flex; gap:.5rem; align-items:center; }
    .vs-btn { padding:.45rem .75rem; border-radius:6px; border:1px solid transparent; cursor:pointer; font-weight:600; }
    .vs-primary { background:#06b6d4; color:#fff; border-color:#06b6d4; }
    .vs-secondary { background:transparent; color:#0f172a; border-color:#e5e7eb; border:1px solid #e5e7eb; }
    .form-error { color:#ef4444; margin-top:.6rem; }
    .form-ok { color:#10b981; margin-top:.6rem; }

    @media (max-width:640px) {
      .actions { flex-direction:column; align-items:stretch; }
      .vs-btn { width:100%; text-align:center; }
    }
  </style>

  <script type="module" src="/js/private/client-accounts/view-client-account.js"></script>

</section>