<div th:fragment="content">
  <div class="site-supervision-visit-header">
    <h2>Visitas de Supervisión a Instalaciones</h2>
    <button class="btn-primary" id="createSupervisionVisitBtn"
            data-path="/private/site-supervision-visits/create">
      Registrar Visita
    </button>
  </div>

  <div class="site-supervision-visit-table-container">
    <table class="site-supervision-visit-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Supervisor</th>
          <th>Instalación</th>
          <th>Fecha y Hora</th>
          <th>Descripción</th>
          <th>Fotografía</th>
          <th>Video</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="v : ${visits}">
          <td data-label="ID" th:text="${v.id}">—</td>
          <td data-label="Supervisor" th:text="${v.supervisorName}">—</td>
          <td data-label="Instalación" th:text="${v.siteName}">—</td>
          <td data-label="Fecha y Hora" th:text="${#temporals.format(v.visitDateTime, 'yyyy-MM-dd HH:mm')}">—</td>
          <td data-label="Descripción" th:text="${v.description != null ? v.description : '—'}">—</td>
          <td data-label="Fotografía">
            <a th:href="${v.photoUrl}" target="_blank" th:if="${v.photoUrl}">
              <img th:src="${v.photoUrl}" alt="Foto">
            </a>
            <span th:if="${v.photoUrl == null}">—</span>
          </td>
          <td data-label="Video">
            <a th:href="${v.videoUrl}" target="_blank" th:if="${v.videoUrl}">
              <span class="tag tag-video">Ver video</span>
            </a>
            <span th:if="${v.videoUrl == null}">—</span>
          </td>
          <td data-label="Acciones" class="actions">
            <button type="button"
                    class="btn-link"
                    th:attr="data-path=@{/private/site-supervision-visits/show/{id}(id=${v.id})}">
                    Ver
            </button>
            <button type="button"
                    class="btn-link"
                    th:attr="data-path=@{/private/site-supervision-visits/edit/{id}(id=${v.id})}"
                    th:if="${#authorization.expression('hasRole(''ADMINISTRATOR'')')}">
                    Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>