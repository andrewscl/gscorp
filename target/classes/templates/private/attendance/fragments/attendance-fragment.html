<!-- Botón de asistencia + mapa de ubicación -->
<section th:fragment="attendanceButton" class="card attendance" style="max-width:520px;padding:1rem">
  <h3 style="margin-top:0">Asistencia</h3>

  <!-- Mensaje de estado y nombre del sitio más cercano -->
  <div id="att-status" style="margin:.5rem 0;color:#444">Detectando sitio más cercano...</div>
  <div id="att-site-info" style="margin-bottom:0.5rem;color:#0077b6;font-weight:bold"></div>

  <div id="att-widget"
       data-punch-endpoint="/api/attendance/punch">

    <!-- Los botones se mostrarán/ocultarán por JS según estado -->
    <button id="att-in"  class="btn btn-primary"   type="button" style="display:none">Marcar entrada</button>
    <button id="att-out" class="btn btn-secondary" type="button" style="display:none">Marcar salida</button>
  </div>

  <!-- Mapa de ubicación actual y de sitio -->
  <div id="att-map-container" style="width:100%;height:220px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px -4px #cbd5e1;margin-bottom:1rem;background:#f3f4f6">
    <div id="att-map" style="width:100%;height:100%"></div>
  </div>

  <script type="module" th:src="@{/js/private/attendance/attendance.js}" defer></script>
</section>